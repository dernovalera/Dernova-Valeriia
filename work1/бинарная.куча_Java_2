import java.util.ArrayList; // подключаем динамический массив для хранения элементов кучи
import java.util.List;      // List — интерфейс, который удобно использовать для переменной heap

public class Main {
    List<Integer> heap = new ArrayList<>();  // сама куча хранится в ArrayList для доступа по индексу

    void insert(int x) {  // вставка элемента в max-heap
        heap.add(x);  // добавляем новый элемент в конец массива
        int i = heap.size()-1;  // индекс только что вставленного элемента
        while (i > 0 && heap.get(i) > heap.get((i-1)/2)) { // пока элемент больше родителя и не в корне
            int t = heap.get(i);  // сохраняем текущий элемент во временную переменную
            heap.set(i, heap.get((i-1)/2));  // на место текущего элемента ставим родителя
            heap.set((i-1)/2, t);  // на место родителя ставим текущий элемент
            i = (i-1)/2;  // обновляем индекс, теперь текущий элемент на месте родителя, продолжаем проверку выше
        }
    }

    int extractMax() {  // извлечение максимального элемента (корня) из max-heap
        int res = heap.get(0);  // сохраняем корень (максимальный элемент)
        heap.set(0, heap.get(heap.size()-1));  // последний элемент перемещаем на место корня
        heap.remove(heap.size()-1);  // удаляем последний элемент, который мы перенесли
        int i = 0;  // начинаем с корня
        while (2*i+1 < heap.size()) {  // пока есть левый ребёнок
            int j = 2*i+1;  // индекс левого ребёнка
            if (j+1 < heap.size() && heap.get(j+1) > heap.get(j)) j++; // выбираем большего ребёнка для обмена
            if (heap.get(i) >= heap.get(j)) break; // порядок кучи соблюдён, спуск прекращается
            int t = heap.get(i);  // сохраняем текущий элемент
            heap.set(i, heap.get(j));  // ставим на место i большего ребёнка
            heap.set(j, t);  // текущий элемент опускается вниз на место j
            i = j;  // продолжаем спуск с нового места
        }
        return res;  // возвращаем максимальный элемент
    }

    public static void main(String[] args) {  // точка входа программы
        Main h = new Main();  // создаём объект кучи
        h.insert(4);  // вставляем элемент
        h.insert(25); // вставляем элемент
        h.insert(17); // вставляем элемент
        h.insert(11); // вставляем элемент
        System.out.println(h.extractMax()); // извлекаем и выводим максимальный элемент
        
    }
}
